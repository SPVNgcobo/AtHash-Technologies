<!DOCTYPE html>
<html lang="en" class="antialiased">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AtHash OS | Fully Interactive v6.0</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        background: '#050505',
                        surface: '#0A0A0A',
                        surfaceHighlight: '#121212',
                        border: '#222222',
                        primary: '#3B82F6',
                        primaryDim: 'rgba(59, 130, 246, 0.1)',
                        text: '#EDEDED',
                        textDim: '#888888'
                    },
                    fontFamily: {
                        sans: ['"Inter"', 'system-ui', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                    },
                    boxShadow: {
                        'glow': '0 0 20px rgba(59, 130, 246, 0.15)',
                        'modal': '0 25px 50px -12px rgba(0, 0, 0, 0.5)'
                    },
                    animation: {
                        'slide-in-right': 'slideInRight 0.3s cubic-bezier(0.16, 1, 0.3, 1)',
                        'scale-in': 'scaleIn 0.2s cubic-bezier(0.16, 1, 0.3, 1)'
                    },
                    keyframes: {
                        slideInRight: { '0%': { transform: 'translateX(100%)' }, '100%': { transform: 'translateX(0)' } },
                        scaleIn: { '0%': { opacity: 0, transform: 'scale(0.95)' }, '100%': { opacity: 1, transform: 'scale(1)' } }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #050505; color: #EDEDED; overflow: hidden; }
        
        .bg-grid {
            background-size: 40px 40px;
            background-image: linear-gradient(to right, #111 1px, transparent 1px),
                              linear-gradient(to bottom, #111 1px, transparent 1px);
            mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
        }

        .glass { background: rgba(10, 10, 10, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .hidden-force { display: none !important; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-track { background: transparent; }

        .btn-active { background: rgba(59, 130, 246, 0.1); color: #3B82F6; border-color: rgba(59, 130, 246, 0.3); }
        .tab-active { border-bottom: 2px solid #3B82F6; color: white; }
    </style>
</head>
<body class="font-sans antialiased text-sm select-none">

    <div class="fixed inset-0 bg-grid z-0 pointer-events-none"></div>

    <div id="toast-layer" class="fixed bottom-6 right-6 z-[100] flex flex-col gap-2 pointer-events-none"></div>

    <div id="modal-overlay" class="hidden-force fixed inset-0 z-[60] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 transition-opacity duration-300">
        </div>

    <div id="notif-panel" class="hidden-force fixed top-16 right-6 w-80 bg-surface border border-border rounded-xl shadow-modal z-[55] flex flex-col animate-slide-in-right overflow-hidden">
        <div class="p-3 border-b border-border bg-surfaceHighlight flex justify-between items-center">
            <span class="font-bold text-xs uppercase tracking-wider text-textDim">Notifications</span>
            <button onclick="App.UI.toggleNotifications()" class="text-textDim hover:text-white"><i class="ph-bold ph-x"></i></button>
        </div>
        <div class="flex-1 max-h-[400px] overflow-y-auto p-2 space-y-1">
            <div class="p-3 hover:bg-white/5 rounded cursor-pointer border-l-2 border-green-500">
                <div class="font-bold text-xs text-text">Pipeline Success</div>
                <div class="text-xs text-textDim mt-0.5">Build #842 deployed to production.</div>
                <div class="text-[10px] text-textDim/50 mt-2 font-mono">2 mins ago</div>
            </div>
            <div class="p-3 hover:bg-white/5 rounded cursor-pointer border-l-2 border-yellow-500">
                <div class="font-bold text-xs text-text">API Rate Limit</div>
                <div class="text-xs text-textDim mt-0.5">Approaching 80% threshold on 'core-api'.</div>
                <div class="text-[10px] text-textDim/50 mt-2 font-mono">1 hour ago</div>
            </div>
        </div>
        <div class="p-2 border-t border-border bg-surfaceHighlight text-center">
            <button class="text-xs text-primary hover:text-white w-full py-1">Mark all as read</button>
        </div>
    </div>

    <div id="view-login" class="relative z-10 w-full h-screen flex flex-col items-center justify-center transition-all duration-500">
        <div class="w-full max-w-md p-8 glass rounded-2xl shadow-2xl space-y-8 animate-scale-in">
            <div class="flex flex-col items-center gap-4">
                <div class="w-12 h-12 bg-surfaceHighlight rounded-xl flex items-center justify-center border border-white/10 text-primary shadow-glow"><i class="ph-bold ph-shield-check text-2xl"></i></div>
                <div class="text-center">
                    <h1 class="text-2xl font-bold text-text">AtHash<span class="text-primary">_OS</span></h1>
                    <p class="text-textDim text-xs mt-1">v6.0 Interactive Build</p>
                </div>
            </div>
            <button onclick="App.Auth.login()" class="w-full py-3 bg-primary text-white font-bold rounded-lg hover:bg-blue-600 transition-all shadow-glow flex items-center justify-center gap-2 group">
                <span>Enter System</span> <i class="ph-bold ph-arrow-right group-hover:translate-x-1 transition-transform"></i>
            </button>
        </div>
    </div>

    <div id="view-app" class="hidden-force fixed inset-0 z-20 bg-background flex">
        
        <aside class="w-[280px] bg-surface border-r border-border flex flex-col flex-shrink-0 z-30">
            <div class="h-14 flex items-center px-4 border-b border-border gap-3">
                <div class="w-6 h-6 bg-primary rounded flex items-center justify-center text-white text-xs font-bold">AH</div>
                <span class="font-bold text-text">AtHash Inc.</span>
            </div>

            <div class="p-3 relative">
                <button onclick="App.UI.toggleDropdown('ws-menu')" class="w-full flex items-center gap-3 px-3 py-2 bg-surfaceHighlight border border-white/10 rounded-lg hover:border-white/20 transition-colors text-left group">
                    <div id="ws-dot" class="w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_#22c55e]"></div>
                    <div class="flex-1 overflow-hidden">
                        <div id="ws-label" class="text-xs font-bold text-text truncate">Production</div>
                        <div class="text-xxs text-textDim truncate font-mono">aws-us-east-1</div>
                    </div>
                    <i class="ph-bold ph-caret-down text-textDim group-hover:text-text"></i>
                </button>
                <div id="ws-menu" class="hidden-force absolute top-14 left-3 right-3 bg-surfaceHighlight border border-border rounded-lg shadow-xl z-50 overflow-hidden animate-scale-in">
                    <button onclick="App.Workspace.switch('Production', 'green')" class="w-full text-left px-3 py-2 hover:bg-white/5 flex items-center gap-2 text-xs text-text"><span class="w-1.5 h-1.5 rounded-full bg-green-500"></span> Production</button>
                    <button onclick="App.Workspace.switch('Staging', 'yellow')" class="w-full text-left px-3 py-2 hover:bg-white/5 flex items-center gap-2 text-xs text-text"><span class="w-1.5 h-1.5 rounded-full bg-yellow-500"></span> Staging</button>
                    <button onclick="App.Workspace.switch('Development', 'gray')" class="w-full text-left px-3 py-2 hover:bg-white/5 flex items-center gap-2 text-xs text-text"><span class="w-1.5 h-1.5 rounded-full bg-slate-500"></span> Dev</button>
                </div>
            </div>

            <nav class="flex-1 px-2 space-y-0.5 overflow-y-auto">
                <div class="px-3 py-2 text-xxs font-bold text-textDim uppercase tracking-wider mt-2">Platform</div>
                <button onclick="App.Router.go('overview')" id="nav-overview" class="w-full flex items-center gap-3 px-3 py-2 rounded-md text-textDim hover:text-text btn-hover group text-sm font-medium"><i class="ph ph-squares-four text-lg"></i> Overview</button>
                <button onclick="App.Router.go('pipelines')" id="nav-pipelines" class="w-full flex items-center gap-3 px-3 py-2 rounded-md text-textDim hover:text-text btn-hover group text-sm font-medium"><i class="ph ph-git-merge text-lg"></i> Pipelines</button>
                <button onclick="App.Router.go('vault')" id="nav-vault" class="w-full flex items-center gap-3 px-3 py-2 rounded-md text-textDim hover:text-text btn-hover group text-sm font-medium"><i class="ph ph-lock-key text-lg"></i> Vault</button>
                
                <div class="px-3 py-2 text-xxs font-bold text-textDim uppercase tracking-wider mt-6">Configuration</div>
                <button onclick="App.Router.go('settings', 'team')" id="nav-team" class="w-full flex items-center gap-3 px-3 py-2 rounded-md text-textDim hover:text-text btn-hover group text-sm font-medium"><i class="ph ph-users text-lg"></i> Team</button>
                <button onclick="App.Router.go('settings', 'general')" id="nav-general" class="w-full flex items-center gap-3 px-3 py-2 rounded-md text-textDim hover:text-text btn-hover group text-sm font-medium"><i class="ph ph-gear text-lg"></i> Settings</button>
            </nav>

            <div class="p-3 border-t border-border">
                <button onclick="App.Auth.logout()" class="w-full flex items-center gap-3 px-3 py-2 rounded-md hover:bg-white/5 text-textDim hover:text-red-400 transition-colors"><i class="ph ph-sign-out text-lg"></i> <span class="text-xs font-medium">Sign Out</span></button>
            </div>
        </aside>

        <main class="flex-1 flex flex-col min-w-0 bg-background relative overflow-hidden">
            <header class="h-14 bg-background/80 backdrop-blur border-b border-border flex items-center justify-between px-6 z-20 sticky top-0">
                <div class="flex items-center gap-2 text-sm text-textDim">
                    <button onclick="App.Router.go('overview')" class="hover:text-white"><i class="ph ph-house"></i></button>
                    <span>/</span>
                    <span id="page-title" class="text-text font-medium">Overview</span>
                </div>
                <div class="flex items-center gap-3">
                    <div id="live-indicator" class="hidden md:flex items-center gap-1.5 px-2 py-1 rounded-full bg-green-500/10 border border-green-500/20 text-xxs font-mono text-green-400">
                        <span class="w-1 h-1 rounded-full bg-green-400 animate-pulse"></span> LIVE
                    </div>
                    <button onclick="App.UI.toggleNotifications()" class="w-8 h-8 rounded-full bg-surfaceHighlight border border-white/10 flex items-center justify-center text-slate-400 hover:text-white relative hover:bg-white/10 transition-colors">
                        <i class="ph ph-bell"></i>
                        <span class="absolute top-2 right-2.5 w-1.5 h-1.5 bg-red-500 rounded-full border border-surface"></span>
                    </button>
                    <button class="w-8 h-8 rounded-full bg-primary text-white font-bold flex items-center justify-center text-xs">AD</button>
                </div>
            </header>

            <div class="flex-1 overflow-y-auto p-6 md:p-8 relative z-10" id="main-scroll">
                
                <div id="page-overview" class="page space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="p-5 rounded-xl border border-border bg-surfaceHighlight/50 cursor-pointer hover:border-primary/50 transition-colors" onclick="App.UI.toast('CPU Load Stable')">
                            <div class="flex justify-between items-start mb-4"><span class="text-xs text-textDim font-medium uppercase tracking-wider">System Load</span><i class="ph-bold ph-cpu text-textDim"></i></div>
                            <div class="text-3xl font-bold text-text font-mono tracking-tight">34<span class="text-lg text-textDim">%</span></div>
                            <div class="h-10 w-full mt-2 relative overflow-hidden opacity-50"><canvas id="spark-load" class="absolute inset-0 w-full h-full"></canvas></div>
                        </div>
                        <div class="p-5 rounded-xl border border-border bg-surfaceHighlight/50 cursor-pointer hover:border-primary/50 transition-colors" onclick="App.Router.go('pipelines')">
                            <div class="flex justify-between items-start mb-4"><span class="text-xs text-textDim font-medium uppercase tracking-wider">Requests / sec</span><i class="ph-bold ph-globe text-textDim"></i></div>
                            <div class="text-3xl font-bold text-text font-mono tracking-tight">842</div>
                            <div class="text-xs text-green-400 mt-2 font-mono">↑ 12% vs 1h ago</div>
                        </div>
                        <div class="p-5 rounded-xl border border-border bg-surfaceHighlight/50 cursor-pointer hover:border-primary/50 transition-colors" onclick="App.Router.go('vault')">
                            <div class="flex justify-between items-start mb-4"><span class="text-xs text-textDim font-medium uppercase tracking-wider">Health Score</span><i class="ph-bold ph-heartbeat text-primary"></i></div>
                            <div class="text-3xl font-bold text-text font-mono tracking-tight">100</div>
                            <div class="w-full bg-white/5 rounded-full h-1 mt-4 overflow-hidden"><div class="bg-primary h-full w-full shadow-[0_0_10px_#3B82F6]"></div></div>
                        </div>
                    </div>

                    <div class="rounded-xl border border-border bg-surfaceHighlight/30 overflow-hidden flex flex-col h-[400px]">
                        <div class="px-5 py-3 border-b border-border flex justify-between items-center bg-surfaceHighlight/50">
                            <h3 class="text-sm font-medium text-text">Traffic Analysis</h3>
                            <div class="flex gap-2">
                                <button onclick="App.Charts.toggleMode('1H', this)" class="text-xxs font-mono text-textDim px-2 py-1 rounded bg-white/5 hover:bg-white/10 transition-colors">1H</button>
                                <button onclick="App.Charts.toggleMode('LIVE', this)" class="text-xxs font-mono text-text bg-primary/20 text-primary px-2 py-1 rounded border border-primary/20 transition-colors">LIVE</button>
                            </div>
                        </div>
                        <div class="flex-1 relative"><canvas id="main-chart" class="w-full h-full"></canvas></div>
                    </div>
                </div>

                <div id="page-pipelines" class="page hidden-force flex flex-col md:flex-row h-[calc(100vh-140px)] gap-6">
                    <div class="w-full md:w-1/3 flex flex-col gap-4">
                        <div class="flex justify-between items-center">
                            <h2 class="font-bold text-text">Active Jobs</h2>
                            <button onclick="App.Pipelines.addJob()" class="p-1.5 rounded hover:bg-white/10 text-textDim hover:text-white transition-colors" title="Trigger New"><i class="ph-bold ph-plus"></i></button>
                        </div>
                        <div class="flex-1 overflow-y-auto space-y-2 pr-2" id="job-list"></div>
                    </div>
                    <div class="flex-1 rounded-xl border border-border bg-[#0a0a0a] flex flex-col font-mono text-xs overflow-hidden shadow-2xl">
                        <div class="px-4 py-2 bg-[#111] border-b border-border flex justify-between items-center select-none">
                            <div class="flex gap-2"><div class="w-2.5 h-2.5 rounded-full bg-red-500/20 border border-red-500/50"></div><div class="w-2.5 h-2.5 rounded-full bg-yellow-500/20 border border-yellow-500/50"></div><div class="w-2.5 h-2.5 rounded-full bg-green-500/20 border border-green-500/50"></div></div>
                            <span class="text-textDim" id="term-title">terminal</span>
                        </div>
                        <div class="flex-1 p-4 overflow-y-auto space-y-1 text-slate-400" id="terminal-output"><div class="text-textDim">Select a job to stream logs...</div></div>
                    </div>
                </div>

                <div id="page-vault" class="page hidden-force space-y-6">
                    <div class="flex justify-between items-center">
                        <h2 class="font-bold text-text">Secrets Manager</h2>
                        <button onclick="App.Vault.openAddModal()" class="px-3 py-1.5 bg-primary text-white text-xs font-bold rounded hover:bg-blue-600 transition-colors shadow-glow">+ Add Secret</button>
                    </div>
                    <div class="rounded-xl border border-border overflow-hidden bg-surfaceHighlight/30">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-surfaceHighlight border-b border-border text-xs text-textDim uppercase"><tr><th class="px-6 py-3">Key</th><th class="px-6 py-3">Env</th><th class="px-6 py-3">Value</th><th class="px-6 py-3 text-right">Actions</th></tr></thead>
                            <tbody class="divide-y divide-border" id="vault-rows"></tbody>
                        </table>
                    </div>
                </div>

                <div id="page-settings" class="page hidden-force space-y-6">
                    <h2 class="font-bold text-text text-xl">Settings</h2>
                    <div class="flex gap-4 border-b border-border mb-6">
                        <button onclick="App.Router.go('settings', 'general')" id="tab-general" class="pb-2 text-sm text-textDim hover:text-white transition-colors">General</button>
                        <button onclick="App.Router.go('settings', 'team')" id="tab-team" class="pb-2 text-sm text-textDim hover:text-white transition-colors">Team Members</button>
                    </div>
                    <div id="settings-content" class="max-w-2xl">
                        </div>
                </div>

            </div>
        </main>
    </div>

    <script>
        const App = {
            init() {
                this.Charts.initSparkline();
                this.Charts.initMainChart();
                this.Pipelines.renderList();
                this.Vault.render();
                
                // Click Outside Handler
                document.addEventListener('click', (e) => {
                    const wsMenu = document.getElementById('ws-menu');
                    const wsTrigger = document.querySelector('[onclick*="ws-menu"]');
                    if (!wsMenu.classList.contains('hidden-force') && !wsMenu.contains(e.target) && !wsTrigger.contains(e.target)) {
                        wsMenu.classList.add('hidden-force');
                    }
                    
                    const notifPanel = document.getElementById('notif-panel');
                    const notifTrigger = document.querySelector('[onclick*="toggleNotifications"]');
                    if (!notifPanel.classList.contains('hidden-force') && !notifPanel.contains(e.target) && !notifTrigger.contains(e.target)) {
                        notifPanel.classList.add('hidden-force');
                    }
                });
            },

            Router: {
                go(page, tab = null) {
                    // Hide all pages
                    document.querySelectorAll('.page').forEach(el => el.classList.add('hidden-force'));
                    // Show target
                    const target = page === 'settings' ? 'page-settings' : `page-${page}`;
                    document.getElementById(target).classList.remove('hidden-force');
                    
                    // Update Sidebar
                    document.querySelectorAll('[id^="nav-"]').forEach(el => {
                        el.classList.remove('btn-active', 'text-text');
                        el.classList.add('text-textDim');
                    });
                    
                    // Handle Sub-tabs for Settings
                    if(page === 'settings') {
                        const activeNav = document.getElementById(tab === 'team' ? 'nav-team' : 'nav-general'); // Highlight generic settings nav if wanted, or specific
                        // For this UI, highlight the generic sections:
                        document.querySelectorAll('#nav-team, #nav-general').forEach(e => e.classList.remove('btn-active'));
                        if(tab) document.getElementById(`nav-${tab}`).classList.add('btn-active');
                        
                        App.Settings.render(tab || 'general');
                        document.getElementById('page-title').innerText = `Settings / ${tab ? tab.charAt(0).toUpperCase() + tab.slice(1) : 'General'}`;
                    } else {
                        const active = document.getElementById(`nav-${page}`);
                        if(active) {
                            active.classList.add('btn-active', 'text-text');
                            active.classList.remove('text-textDim');
                        }
                        document.getElementById('page-title').innerText = page.charAt(0).toUpperCase() + page.slice(1);
                    }
                }
            },

            Auth: {
                login() {
                    const btn = event.currentTarget;
                    btn.innerHTML = `<i class="ph-bold ph-spinner animate-spin"></i> Authenticating...`;
                    setTimeout(() => {
                        document.getElementById('view-login').style.opacity = '0';
                        setTimeout(() => {
                            document.getElementById('view-login').classList.add('hidden-force');
                            document.getElementById('view-app').classList.remove('hidden-force');
                            App.Router.go('overview');
                        }, 500);
                    }, 1000);
                },
                logout() { location.reload(); }
            },

            UI: {
                toggleDropdown(id) {
                    document.getElementById(id).classList.toggle('hidden-force');
                },
                toggleNotifications() {
                    const el = document.getElementById('notif-panel');
                    el.classList.toggle('hidden-force');
                },
                toast(msg) {
                    const c = document.getElementById('toast-layer');
                    const el = document.createElement('div');
                    el.className = "glass px-4 py-3 border-l-4 border-primary text-white rounded shadow-lg animate-scale-in flex items-center gap-3 w-64";
                    el.innerHTML = `<i class="ph-bold ph-info"></i> <span class="text-xs">${msg}</span>`;
                    c.appendChild(el);
                    setTimeout(() => { el.style.opacity = '0'; setTimeout(() => el.remove(), 300); }, 3000);
                },
                closeModal() {
                    document.getElementById('modal-overlay').classList.add('hidden-force');
                }
            },

            Workspace: {
                switch(name, color) {
                    document.getElementById('ws-label').innerText = name;
                    const map = { green: '#22c55e', yellow: '#eab308', gray: '#64748b' };
                    document.getElementById('ws-dot').style.backgroundColor = map[color];
                    document.getElementById('ws-dot').style.boxShadow = `0 0 8px ${map[color]}`;
                    
                    const indicator = document.getElementById('live-indicator');
                    if (name === 'Production') indicator.classList.remove('hidden');
                    else indicator.classList.add('hidden');
                    
                    document.getElementById('ws-menu').classList.add('hidden-force');
                    App.UI.toast(`Switched to ${name}`);
                }
            },

            Charts: {
                initSparkline() { /* Same as v5 logic */ },
                initMainChart() { /* Same as v5 logic */ },
                toggleMode(mode, btn) {
                    // Visual toggle only
                    btn.parentElement.querySelectorAll('button').forEach(b => {
                        b.className = "text-xxs font-mono text-textDim px-2 py-1 rounded bg-white/5 hover:bg-white/10 transition-colors";
                    });
                    btn.className = "text-xxs font-mono text-text bg-primary/20 text-primary px-2 py-1 rounded border border-primary/20 transition-colors";
                    App.UI.toast(`Chart mode: ${mode}`);
                }
            },

            Pipelines: {
                jobs: [
                    { id: '842', name: 'api-core', status: 'running' },
                    { id: '841', name: 'frontend', status: 'success' },
                    { id: '840', name: 'worker', status: 'failed' }
                ],
                renderList() {
                    const el = document.getElementById('job-list');
                    el.innerHTML = this.jobs.map(j => `
                        <div onclick="App.Pipelines.stream('${j.id}', '${j.name}')" class="p-3 rounded border border-border bg-surfaceHighlight/30 hover:bg-surfaceHighlight cursor-pointer group flex justify-between items-center">
                            <div>
                                <div class="text-xs font-bold text-text group-hover:text-primary">${j.name}</div>
                                <div class="text-xxs text-textDim font-mono">#${j.id} • git:main</div>
                            </div>
                            ${this.badge(j.status)}
                        </div>
                    `).join('');
                },
                badge(s) {
                    if (s==='running') return `<span class="text-blue-400 text-xs"><i class="ph-bold ph-spinner animate-spin"></i></span>`;
                    if (s==='success') return `<span class="text-green-400 text-xs"><i class="ph-bold ph-check"></i></span>`;
                    return `<span class="text-red-400 text-xs"><i class="ph-bold ph-x"></i></span>`;
                },
                addJob() {
                    App.UI.toast('Job Queued: manual-trigger');
                    this.jobs.unshift({id: Math.floor(Math.random()*9000).toString(), name: 'manual-trigger', status: 'running'});
                    this.renderList();
                },
                stream(id, name) {
                    const term = document.getElementById('terminal-output');
                    document.getElementById('term-title').innerText = `${name} : #${id}`;
                    term.innerHTML = `<div class="text-blue-400">> Connecting to runner...</div>`;
                    let logs = ["Pulling docker image...", "Cache hit (240mb)", "Running unit tests...", "Upload success"];
                    let i = 0;
                    const interval = setInterval(() => {
                        if(i >= logs.length) clearInterval(interval);
                        else {
                            term.innerHTML += `<div class="animate-fade-in"><span class="text-textDim text-[10px] mr-2">${new Date().toLocaleTimeString()}</span> ${logs[i]}</div>`;
                            term.scrollTop = term.scrollHeight;
                            i++;
                        }
                    }, 800);
                }
            },

            Vault: {
                data: [{k:'STRIPE_SK', v:'sk_live_...'}, {k:'AWS_KEY', v:'AKIA...' }],
                render() {
                    document.getElementById('vault-rows').innerHTML = this.data.map((d, i) => `
                        <tr class="group hover:bg-white/[0.02]">
                            <td class="px-6 py-4 font-mono text-text">${d.k}</td>
                            <td class="px-6 py-4 text-xs text-textDim"><span class="bg-white/5 px-2 py-1 rounded">Prod</span></td>
                            <td class="px-6 py-4 font-mono text-xs text-textDim"><span id="sec-${i}" class="blur-sm transition-all">••••••••</span></td>
                            <td class="px-6 py-4 text-right">
                                <button onclick="document.getElementById('sec-${i}').classList.toggle('blur-sm')" class="text-textDim hover:text-white mr-2"><i class="ph-bold ph-eye"></i></button>
                                <button onclick="App.UI.toast('Copied to clipboard')" class="text-textDim hover:text-white"><i class="ph-bold ph-copy"></i></button>
                            </td>
                        </tr>
                    `).join('');
                },
                openAddModal() {
                    const modal = document.getElementById('modal-overlay');
                    modal.innerHTML = `
                        <div class="glass p-6 rounded-xl w-full max-w-sm animate-scale-in">
                            <h3 class="font-bold text-text mb-4">Add New Secret</h3>
                            <input id="new-key" placeholder="KEY_NAME" class="w-full bg-surfaceHighlight border border-border rounded p-2 text-sm text-text mb-3 focus:border-primary outline-none">
                            <input id="new-val" placeholder="Value" class="w-full bg-surfaceHighlight border border-border rounded p-2 text-sm text-text mb-4 focus:border-primary outline-none">
                            <div class="flex gap-2">
                                <button onclick="App.Vault.saveNew()" class="flex-1 bg-primary text-white py-2 rounded text-xs font-bold hover:bg-blue-600">Save</button>
                                <button onclick="App.UI.closeModal()" class="flex-1 border border-border text-textDim py-2 rounded text-xs hover:bg-white/5">Cancel</button>
                            </div>
                        </div>
                    `;
                    modal.classList.remove('hidden-force');
                },
                saveNew() {
                    const k = document.getElementById('new-key').value;
                    const v = document.getElementById('new-val').value;
                    if(k && v) {
                        this.data.push({k, v});
                        this.render();
                        App.UI.closeModal();
                        App.UI.toast('Secret stored securely');
                    }
                }
            },

            Settings: {
                render(tab) {
                    const c = document.getElementById('settings-content');
                    // Reset Tabs
                    document.getElementById('tab-general').classList.remove('tab-active');
                    document.getElementById('tab-team').classList.remove('tab-active');
                    document.getElementById(`tab-${tab}`).classList.add('tab-active');

                    if(tab === 'general') {
                        c.innerHTML = `
                            <div class="glass p-6 rounded-xl border border-border">
                                <label class="block text-xs text-textDim mb-1">Company Name</label>
                                <input value="AtHash Corp" class="w-full bg-surfaceHighlight border border-border rounded p-2 text-sm text-text">
                                <div class="mt-4 flex items-center justify-between">
                                    <span class="text-sm text-text">Maintenance Mode</span>
                                    <div class="w-10 h-5 bg-surfaceHighlight rounded-full border border-border relative cursor-pointer" onclick="this.classList.toggle('bg-primary'); this.children[0].classList.toggle('translate-x-5')">
                                        <div class="w-4 h-4 bg-white rounded-full absolute top-0.5 left-0.5 transition-transform"></div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        c.innerHTML = `
                            <div class="glass rounded-xl border border-border overflow-hidden">
                                <div class="p-4 border-b border-border flex justify-between items-center">
                                    <span class="text-sm font-bold text-text">3 Members</span>
                                    <button class="text-xs bg-white/10 px-2 py-1 rounded text-white hover:bg-white/20">Invite</button>
                                </div>
                                <div class="p-4 flex items-center gap-3 border-b border-border/50">
                                    <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center text-xs font-bold text-white">AD</div>
                                    <div><div class="text-sm text-text font-bold">Admin</div><div class="text-xs text-textDim">admin@athash.tech</div></div>
                                </div>
                                <div class="p-4 flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full bg-purple-500 flex items-center justify-center text-xs font-bold text-white">JD</div>
                                    <div><div class="text-sm text-text font-bold">Jane Doe</div><div class="text-xs text-textDim">jane@athash.tech</div></div>
                                </div>
                            </div>
                        `;
                    }
                }
            }
        };

        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
</body>
</html>
